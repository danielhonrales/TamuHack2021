<!DOCTYPE html>
<html>
    
<head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merienda+One">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body style="background-color: #fefae0;">
    
    <div id="header">
        <div id="headerwrap">
            <div id="title">
                <h1>TAMUSnackHack</h1>
            </div>
            <div id="description">
                <h2>Description</h2>
            </div>
        </div>
    </div>

    <div id="main">
        <div class="mainBlock">
            <h3>Ingredients</h3>
            <div>

                <label for="ingredientForm">Enter an ingredient: </label>
                <input type="text" id="ingredientForm" name="ingredientForm"><br>
                <input type="submit" id="formSubmit" name="formSubmit"><br>
                <input type="submit" id="convert" name="convert"><br>

            </div>

            <div id="ingredientList">
                <div class="ingredient">
                    <img src="x.png" alt="x" width="20" height="20" style="margin-right: 10px;">
                    <p>TomatoTomatoTomatoTomatoTomatoTomatoTomatoTomato</p>
                </div>
                <div class="ingredient">
                    <img src="x.png" alt="x" width="20" height="20" style="margin-right: 10px;">
                    <p>Tomato</p>
                </div>
                <div class="ingredient">
                    <img src="x.png" alt="x" width="20" height="20" style="margin-right: 10px;">
                    <p>TomatoTomatoTomato</p>
                </div>
            </div>
        </div>
    
        <div class="mainBlock">
            <h3>Recipes</h3>

            <div id="recipeList">
                <div class="recipe">
                    <div class="recipeHeader">
                        <img src="bread.png" alt="x" width="20" height="20" style="margin-right: 10px;">
                        <p>Bread</p> <br>
                    </div>
                    <p>Description</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        $('body').on('click', '#formSubmit', function(){
            //const ingredient = document.getElementById('Ingredients').value;
            $.ajax({  
                    url: '/formdata', 
                    type: 'POST', 
                    data: { ingredient: "eat" }, 
                    success: () => { 
                        console.log("success");
                    }, 
                    error: () => { 
                        console.log("error");
                    } 
                });
        });
        
        $('body').on('click', '#convert', function(){
            $.ajax({  
                    url: '/conversion', 
                    type: 'GET', 
                    data: { }, 
                    success: (recipes) => { 
                        console.log("success");
                        for(var i in recipes){
                            console.log(recipes[i]);
                            var div = document.createElement("div");
                            div.class = "recipe";
                            
                            var title = document.createElement("h3");
                            title.innerText = recipes[i].name;
                            div.appendChild(title);

                            var url = document.createElement("p");
                            url.innerText = recipes[i].url;
                            div.appendChild(url);
                            
                            document.getElementById("recipeList").appendChild(div);
                        }
                    }, 
                    error: () => { 
                        console.log("error");
                    } 
                });
            
        });
        /*getData();
        async function getData(){ 
            const res = await fetch('/formdata');
            const data = await res.json();
            console.log(data);
        }*/
    </script>
</body>

</html>